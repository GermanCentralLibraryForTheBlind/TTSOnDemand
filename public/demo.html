<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <meta name="theme-color" content="#a87300">

    <title>TTS On Demand Demo</title>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"
            integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>

    <style>
        html, body .jumbotron {
            background-color: #a89a7d;
        }

        .form-group {
            margin-right: 255px;
        }

        .content_sidebar {
            margin-right: 15em;
        }
    </style>


</head>
<body>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">

        </div>
    </div>
</nav>
<div class="jumbotron">
    <div class="container">
        <h1 class="display-3" id="ui-id-1">DZB Vorlese Service
            <a href="#">
                <img alt="Brand" src="experiment.svg" width="200" height="150">
            </a>
        </h1>

        <div class="form-group">
            <label class="label label-primary" for="url">URL:</label>
            <input type="text" class="form-control" id="url"
                   value="http://www.mdr.de/sachsen/sperrung-hauptbahnhof-aufgehoben-100.html">
            //http://www.mdr.de/nachrichten/politik/regional/proteste-gegen-einheitsfeier-100.html
            //http://www.mdr.de/sachsen/dresden/frank-richter-stiftung-frauenkirche-100.html
        </div>
        <button id="btnLoadPage" type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">
            Seite Laden
        </button>
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Artikel Auswahl
                <span class="caret"></span></button>
            <ul class="dropdown-menu">
                <li><a href="#">HTML</a></li>
                <li><a href="#">CSS</a></li>
                <li><a href="#">JavaScript</a></li>
            </ul>
        </div>
        <div id="read"></div>
        <iframe src="" width="10%" height="10%">
        </iframe>
    </div>
</div>

<script>
    $(document).ready(function () {
        fillUpArticlesDropDown();
    });

    const backend = 'http://' + window.location.host + '/injected';
    $("#btnLoadPage").click(function () {
        const href = $("#url").val();
        loadPage(backend, href);

    });


    function fillUpArticlesDropDown() {
//        $("iframe").attr("src", "http://www.mdr.de/sachsen/index.html");
//        $("iframe").ready(function () {
//
//            
//            var $iFrame = $('iframe').contents();
//
//            console.log($iFrame.find("body").html());
//            console.log($iFrame.find("body").html());
                    
//                    .each(function (index) {
//
//                console.log(index + ": " + $(this).find('a').text());
//
//            });
        });
    }

    function loadPage(backend, href) {
        const xhr = new XMLHttpRequest();

        xhr.addEventListener('load', function () {
            window.location.href = 'temp.html';
        });

        xhr.addEventListener('error', function () {
            console.log('Oups! Something goes wrong.');
        });

        const send = backend + '?href=' + href;
        console.log(send);
        xhr.open('GET', send);

        xhr.send();
    }
</script>
</body>
</html>